<div id="map_canvas" ng-controller="MainCtrl" class="middle">
  <div class="angular-google-map-container">
    <ui-gmap-google-map center='map.center' zoom='map.zoom' draggable='true' options='options'>
      <ui-gmap-marker idkey="marker.id" coords="marker.coords" options="marker.options" click="onClick()" events="marker.events" >
        <ui-gmap-window options="windowOptions" closeClick="closeClick()">
            <div>{{title}}</div>
        </ui-gmap-window>
      </ui-gmap-marker>
      <!-- <ui-gmap-marker ng-repeat="m in markers" coords="m" icon="m.icon" idkey="m.id"></ui-gmap-marker> -->

      <ui-gmap-markers models="allMarkers" coords="'self'" icon="'icon'"  doCluster="true" click="onClick()" events="allMarkers.events">
        <ui-gmap-windows show="show">
                <div ng-non-bindable>{{title}}{{contents}}</div>
        </ui-gmap-windows>
      </ui-gmap-markers>
    </ui-gmap-google-map>
  </div>
</div>